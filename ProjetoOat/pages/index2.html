<!DOCTYPE html>
<html lang="pt-BR"> <!--begin::Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>AdminLTE | Dashboard v2</title><!--begin::Primary Meta Tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="AdminLTE | Dashboard v2">
    <meta name="author" content="ColorlibHQ">
    <meta name="description"
        content="AdminLTE is a Free Bootstrap 5 Admin Dashboard, 30 example pages using Vanilla JS.">
    <meta name="keywords"
        content="bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable, vanilla js datatable, colorlibhq, colorlibhq dashboard, colorlibhq admin dashboard">
    <!--end::Primary Meta Tags--><!--begin::Fonts-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css"
        integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous">
    <!--end::Fonts--><!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.3.0/styles/overlayscrollbars.min.css"
        integrity="sha256-dSokZseQNT08wYEWiz5iLI8QPlKxG+TswNRD8k35cpg=" crossorigin="anonymous">
    <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css"
        integrity="sha256-Qsx5lrStHZyR9REqhUF8iQt73X06c8LGIUPzpOhwRrI=" crossorigin="anonymous">
    <!--end::Third Party Plugin(Bootstrap Icons)--><!--begin::Required Plugin(AdminLTE)-->
    <link rel="stylesheet" href="../../dist/css/adminlte.css"><!--end::Required Plugin(AdminLTE)--><!-- apexcharts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
        integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0=" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,400;0,700;1,100;1,400;1,700&display=swap"
        rel="stylesheet">

</head>

<body class="layout-fixed sidebar-expand-lg bg-body-tertiary"> <!--begin::App Wrapper-->
    <div class="app-wrapper"> <!--begin::Header-->
        <nav class="app-header navbar navbar-expand bg-body"> <!--begin::Container-->
            <div class="container-fluid"> <!--begin::Start Navbar Links-->
                <ul class="navbar-nav">
                    <li class="nav-item"> <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button"> <i
                                class="bi bi-list"></i> </a> </li>
                    <li class="nav-item d-none d-md-block"> <a href="#" class="nav-link">Home</a> </li>
                    <li class="nav-item d-none d-md-block"> <a href="#" class="nav-link">Contact</a> </li>
                </ul> <!--end::Start Navbar Links--> <!--begin::End Navbar Links-->
            </div> <!--end::Container-->
        </nav> <!--end::Header--> <!--begin::Sidebar-->
        <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark"> <!--begin::Sidebar Brand-->
            <div class="sidebar-brand"> <!--begin::Brand Link--> <a href="./index.html" class="brand-link">
                    <!--begin::Brand Image--> <img src="../../dist/assets/img/engrenagens.png" alt="MaxTurbo"
                        title="MaxTurbo" class="brand-image opacity-75 shadow" style="border-radius: 5px;">
                    <!--end::Brand Image--> <!--begin::Brand Text--> <span class="brand-text fw-light">MaxTurbo</span>
                    <!--end::Brand Text--> </a> <!--end::Brand Link--> </div> <!--end::Sidebar Brand-->
            <!--begin::Sidebar Wrapper-->
            <div class="sidebar-wrapper">
                <nav class="mt-2"> <!--begin::Sidebar Menu-->
                    <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="menu"
                        data-accordion="false">
                        <li class="nav-item menu-open"> <a href="#" class="nav-link active"> <i
                                    class="nav-icon bi bi-speedometer"></i>
                                <p>
                                    Produtos
                                    <i class="nav-arrow bi bi-chevron-right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item"> <a href="./index.html" class="nav-link"> <i
                                            class="nav-icon bi bi-circle"></i>
                                        <p>Peças</p>
                                    </a> </li>
                                <li class="nav-item"> <a href="./index2.html" class="nav-link"> <i
                                            class="nav-icon bi bi-circle"></i>
                                        <p>Registro de Valores</p>
                                    </a> </li>
                                <li class="nav-item"> <a href="./index3.html" class="nav-link active"> <i
                                            class="nav-icon bi bi-circle"></i>
                                        <p>Exclusão</p>
                                    </a> </li>
                            </ul>
                        </li>
                        <li class="nav-item"> <a href="#" class="nav-link"> <i class="nav-icon bi bi-tree-fill"></i>
                                <p>
                                    Geral
                                    <i class="nav-arrow bi bi-chevron-right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item"> <a href="./UI/general.html" class="nav-link"> <i
                                            class="nav-icon bi bi-circle"></i>
                                        <p>General</p>
                                    </a> </li>
                                <li class="nav-item"> <a href="./UI/timeline.html" class="nav-link"> <i
                                            class="nav-icon bi bi-circle"></i>
                                        <p>Timeline</p>
                                    </a> </li>
                            </ul>
                        </li>
                        <li class="nav-item"> <a href="#" class="nav-link"> <i class="nav-icon bi bi-pencil-square"></i>
                                <p>
                                    Forms
                                    <i class="nav-arrow bi bi-chevron-right"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item"> <a href="./forms/general.html" class="nav-link"> <i
                                            class="nav-icon bi bi-circle"></i>
                                        <p>General Elements</p>
                                    </a> </li>
                            </ul>
                        </li>
                        <li class="nav-item"> <a href="./generate/theme.html" class="nav-link"> <i
                                    class="nav-icon bi bi-palette"></i>
                                <p>Temas</p>
                            </a> </li>
                        </li>
                    </ul> <!--end::Sidebar Menu-->
                </nav>
            </div> <!--end::Sidebar Wrapper-->
        </aside> <!--end::Sidebar--> <!--begin::App Main-->
        <main class="container">

            <section id="balance">
                <h2 class="sr-only">Balanço</h2>

                <div class="card">
                    <h3>
                        <span>
                            Entradas
                        </span>
                        <img src="../assets/img/assets/income.svg" alt="Image para entradas">
                    </h3>
                    <p id="incomeDisplay">R$ 0,00</p>
                </div>

                <div class="card">
                    <h3>
                        <span>
                            Saídas
                        </span>
                        <img src="../assets/img/assets/expense.svg" alt="Image para saídas">
                    </h3>
                    <p id="expenseDisplay">R$ 0,00</p>
                </div>

                <div class="card total">
                    <h3>
                        <span>
                            Total
                        </span>
                        <img src="../assets/img/assets/total.svg" alt="Image do total">
                    </h3>
                    <p id="totalDisplay">R$ 0,00</p>
                </div>

            </section>

            <section id="transaction">
                <h2 class="sr-only">Transações</h2>
                <a href="#" onclick="Modal.open()" class="button new">+ Adicionar Nova Transação</a>
                <table id="data-table">
                    <thead>
                        <tr>
                            <th>Descrição</th>
                            <th>Valor</th>
                            <th>Data</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </section>
        </main>

        <div class="modal-overlay">
            <div class="modal">
                <div id="form">
                    <h2>Nova Transação</h2>
                    <form action="" onsubmit="Form.submit(event)">
                        <div class="input-group">
                            <label class="sr-only" for="description">Descrição</label>
                            <input type="text" id="description" name="description" placeholder="Descrição" />
                        </div>

                        <div class="input-group">
                            <label class="sr-only" for="amount">Valor</label>
                            <input type="number" step="0.01" id="amount" name="amount" placeholder="0,00" />
                            <small class="help">Use o sinal ( - ) para despesas e ( , ) para casas decimais</small>
                        </div>

                        <div class="input-group">
                            <label class="sr-only" for="date">Data</label>
                            <input type="date" id="date" name="date" />
                        </div>

                        <div class="input-group actions">
                            <a onclick="Modal.close()" href="#" class="button cancel">Cancelar</a>
                            <button>Salvar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <footer class="app-footer"> <!--begin::To the end-->
            <div class="float-end d-none d-sm-inline">Anything you want</div> <!--end::To the end-->
            <!--begin::Copyright--> <strong>
                Copyright &copy; 2014-2024&nbsp;
                <a href="./index.html" class="text-decoration-none">MaxTurbo</a>.
            </strong>
            All rights reserved.
            <!--end::Copyright-->
        </footer> <!--end::Footer-->
    </div> <!--end::App Wrapper--> <!--begin::Script--> <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <script src="../js/scripts.jss"></script>
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.3.0/browser/overlayscrollbars.browser.es6.min.js"
        integrity="sha256-H2VM7BKda+v2Z4+DRy69uknwxjyDRhszjXFhsL4gD3w=" crossorigin="anonymous"></script>
    <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha256-whL0tQWoY1Ku1iskqPFvmZ+CHsvmRWx/PIoEvIeWh4I=" crossorigin="anonymous"></script>
    <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha256-YMa+wAM6QkVyz999odX7lPRxkoYAan8suedu4k2Zur8=" crossorigin="anonymous"></script>
    <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
    <script src="../../dist/js/adminlte.js"></script>
    <!--end::Required Plugin(AdminLTE)--><!--begin::OverlayScrollbars Configure-->
    <script>
        const SELECTOR_SIDEBAR_WRAPPER = ".sidebar-wrapper";
        const Default = {
            scrollbarTheme: "os-theme-light",
            scrollbarAutoHide: "leave",
            scrollbarClickScroll: true,
        };
        document.addEventListener("DOMContentLoaded", function () {
            const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
            if (
                sidebarWrapper &&
                typeof OverlayScrollbarsGlobal?.OverlayScrollbars !== "undefined"
            ) {
                OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
                    scrollbars: {
                        theme: Default.scrollbarTheme,
                        autoHide: Default.scrollbarAutoHide,
                        clickScroll: Default.scrollbarClickScroll,
                    },
                });
            }
        });
    </script> <!--end::OverlayScrollbars Configure--> <!-- OPTIONAL SCRIPTS --> <!-- apexcharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
        integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8=" crossorigin="anonymous"></script>
    <script>
        // NOTICE!! DO NOT USE ANY OF THIS JAVASCRIPT
        // IT'S ALL JUST JUNK FOR DEMO
        // ++++++++++++++++++++++++++++++++++++++++++

        /* apexcharts
         * -------
         * Here we will create a few charts using apexcharts
         */

        //-----------------------
        // - MONTHLY SALES CHART -
        //-----------------------

        const sales_chart_options = {
            series: [{
                name: "Digital Goods",
                data: [28, 48, 40, 19, 86, 27, 90],
            },
            {
                name: "Electronics",
                data: [65, 59, 80, 81, 56, 55, 40],
            },
            ],
            chart: {
                height: 180,
                type: "area",
                toolbar: {
                    show: false,
                },
            },
            legend: {
                show: false,
            },
            colors: ["#0d6efd", "#20c997"],
            dataLabels: {
                enabled: false,
            },
            stroke: {
                curve: "smooth",
            },
            xaxis: {
                type: "datetime",
                categories: [
                    "2023-01-01",
                    "2023-02-01",
                    "2023-03-01",
                    "2023-04-01",
                    "2023-05-01",
                    "2023-06-01",
                    "2023-07-01",
                ],
            },
            tooltip: {
                x: {
                    format: "MMMM yyyy",
                },
            },
        };

        const sales_chart = new ApexCharts(
            document.querySelector("#sales-chart"),
            sales_chart_options,
        );
        sales_chart.render();

        //---------------------------
        // - END MONTHLY SALES CHART -
        //---------------------------

        function createSparklineChart(selector, data) {
            const options = {
                series: [{
                    data
                }],
                chart: {
                    type: "line",
                    width: 150,
                    height: 30,
                    sparkline: {
                        enabled: true,
                    },
                },
                colors: ["var(--bs-primary)"],
                stroke: {
                    width: 2,
                },
                tooltip: {
                    fixed: {
                        enabled: false,
                    },
                    x: {
                        show: false,
                    },
                    y: {
                        title: {
                            formatter: function (seriesName) {
                                return "";
                            },
                        },
                    },
                    marker: {
                        show: false,
                    },
                },
            };

            const chart = new ApexCharts(document.querySelector(selector), options);
            chart.render();
        }

        const table_sparkline_1_data = [
            25, 66, 41, 89, 63, 25, 44, 12, 36, 9, 54,
        ];
        const table_sparkline_2_data = [
            12, 56, 21, 39, 73, 45, 64, 52, 36, 59, 44,
        ];
        const table_sparkline_3_data = [
            15, 46, 21, 59, 33, 15, 34, 42, 56, 19, 64,
        ];
        const table_sparkline_4_data = [
            30, 56, 31, 69, 43, 35, 24, 32, 46, 29, 64,
        ];
        const table_sparkline_5_data = [
            20, 76, 51, 79, 53, 35, 54, 22, 36, 49, 64,
        ];
        const table_sparkline_6_data = [
            5, 36, 11, 69, 23, 15, 14, 42, 26, 19, 44,
        ];
        const table_sparkline_7_data = [
            12, 56, 21, 39, 73, 45, 64, 52, 36, 59, 74,
        ];

        createSparklineChart("#table-sparkline-1", table_sparkline_1_data);
        createSparklineChart("#table-sparkline-2", table_sparkline_2_data);
        createSparklineChart("#table-sparkline-3", table_sparkline_3_data);
        createSparklineChart("#table-sparkline-4", table_sparkline_4_data);
        createSparklineChart("#table-sparkline-5", table_sparkline_5_data);
        createSparklineChart("#table-sparkline-6", table_sparkline_6_data);
        createSparklineChart("#table-sparkline-7", table_sparkline_7_data);

        //-------------
        // - PIE CHART -
        //-------------

        const pie_chart_options = {
            series: [700, 500, 400, 600, 300, 100],
            chart: {
                type: "donut",
            },
            labels: ["Chrome", "Edge", "FireFox", "Safari", "Opera", "IE"],
            dataLabels: {
                enabled: false,
            },
            colors: [
                "#0d6efd",
                "#20c997",
                "#ffc107",
                "#d63384",
                "#6f42c1",
                "#adb5bd",
            ],
        };

        const pie_chart = new ApexCharts(
            document.querySelector("#pie-chart"),
            pie_chart_options,
        );
        pie_chart.render();

        //-----------------
        // - END PIE CHART -
        //-----------------
        const Modal = {
                open(){

                    document
                        .querySelector('.modal-overlay')
                        .classList
                        .add('active')

                },
                close(){

                    document
                        .querySelector('.modal-overlay')
                        .classList
                        .remove('active')
                }
            }

            const Storage = {
                get() {
                    return JSON.parse(localStorage.getItem("dev.finances:transactions")) || []
                },

                set(transactions) {
                    localStorage.setItem("dev.finances:transactions", JSON.stringify(transactions))
                }
            }

            const Transaction = {
                all: Storage.get(),

                add(transaction){
                    Transaction.all.push(transaction)

                    App.reload()
                },

                remove(index) {
                    Transaction.all.splice(index, 1)

                    App.reload()
                },

                incomes() {
                    let income = 0;
                    Transaction.all.forEach(transaction => {
                        if( transaction.amount > 0 ) {
                            income += transaction.amount;
                        }
                    })
                    return income;
                },

                expenses() {
                    let expense = 0;
                    Transaction.all.forEach(transaction => {
                        if( transaction.amount < 0 ) {
                            expense += transaction.amount;
                        }
                    })
                    return expense;
                },

                total() {
                    return Transaction.incomes() + Transaction.expenses();
                }
            }

            const DOM = {
                transactionsContainer: document.querySelector('#data-table tbody'),

                addTransaction(transaction, index) {
                    const tr = document.createElement('tr')
                    tr.innerHTML = DOM.innerHTMLTransaction(transaction, index)
                    tr.dataset.index = index

                    DOM.transactionsContainer.appendChild(tr)
                },

                innerHTMLTransaction(transaction, index) {
                    const CSSclass = transaction.amount > 0 ? "income" : "expense"

                    const amount = Utils.formatCurrency(transaction.amount)

                    const html = `
                    <td class="description">${transaction.description}</td>
                    <td class="${CSSclass}">${amount}</td>
                    <td class="date">${transaction.date}</td>
                    <td>
                        <img onclick="Transaction.remove(${index})" src="./assets/img/assets/minus.svg" alt="Remover transação">
                    </td>
                    `

                    return html
                },

                updateBalance() {
                    document
                        .getElementById('incomeDisplay')
                        .innerHTML = Utils.formatCurrency(Transaction.incomes())
                    document
                        .getElementById('expenseDisplay')
                        .innerHTML = Utils.formatCurrency(Transaction.expenses())
                    document
                        .getElementById('totalDisplay')
                        .innerHTML = Utils.formatCurrency(Transaction.total())
                },

                clearTransactions() {
                    DOM.transactionsContainer.innerHTML = ""
                }
            }

            const Utils = {
                formatAmount(value){
                    value = Number(value.replace(/\,\./g, "")) * 100
                    
                    return value
                },

                formatDate(date) {
                    const splittedDate = date.split("-")
                    return `${splittedDate[2]}/${splittedDate[1]}/${splittedDate[0]}`
                },

                formatCurrency(value) {
                    const signal = Number(value) < 0 ? "-" : ""

                    value = String(value).replace(/\D/g, "")

                    value = Number(value) / 100

                    value = value.toLocaleString("pt-BR", {
                        style: "currency",
                        currency: "BRL"
                    })

                return signal + value
                }
            }

            const Form = {
                description: document.querySelector('input#description'),
                amount: document.querySelector('input#amount'),
                date: document.querySelector('input#date'),

                getValues() {
                    return {
                        description: Form.description.value,
                        amount: Form.amount.value,
                        date: Form.date.value
                    }
                },

                validateFields() {
                    const { description, amount, date } = Form.getValues()
                    
                    if( description.trim() === "" || 
                        amount.trim() === "" || 
                        date.trim() === "" ) {
                            throw new Error("Por favor, preencha todos os campos")
                    }
                },

                formatValues() {
                    let { description, amount, date } = Form.getValues()
                    
                    amount = Utils.formatAmount(amount)

                    date = Utils.formatDate(date)

                    return {
                        description,
                        amount,
                        date
                    }
                },

                clearFields() {
                    Form.description.value = ""
                    Form.amount.value = ""
                    Form.date.value = ""
                },

                submit(event) {
                    event.preventDefault()

                    try {
                        Form.validateFields()
                        const transaction = Form.formatValues()
                        Transaction.add(transaction)
                        Form.clearFields()
                        Modal.close()
                    } catch (error) {
                        alert(error.message)
                    }
                }
            }

            const App = {
                init() {
                    Transaction.all.forEach(DOM.addTransaction)
                    
                    DOM.updateBalance()

                    Storage.set(Transaction.all)
                },
                reload() {
                    DOM.clearTransactions()
                    App.init()
                },
            }
            App.init()
    </script> <!--end::Script-->

</body><!--end::Body-->

</html>